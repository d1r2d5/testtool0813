<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>软件测试工具集</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome (使用备用CDN) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- 引入条形码生成库 (使用备用CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsbarcode/3.11.6/JsBarcode.all.min.js"></script>
  
  <!-- 配置Tailwind自定义颜色和字体 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#3B82F6',
            secondary: '#10B981',
            accent: '#8B5CF6',
            dark: '#1E293B',
            light: '#F8FAFC'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .tool-card {
        @apply bg-white rounded-xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
      }
      .btn-primary {
        @apply bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 focus:ring-2 focus:ring-primary/50 focus:outline-none;
      }
      .btn-secondary {
        @apply bg-secondary hover:bg-secondary/90 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 focus:ring-2 focus:ring-secondary/50 focus:outline-none;
      }
      .input-field {
        @apply w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all duration-200 outline-none;
      }
      .section-title {
        @apply text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-6 relative inline-block;
      }
      .section-title::after {
        @apply content-[''] absolute w-1/2 h-1 bg-primary left-0 bottom-[-8px] rounded-full;
      }
      /* 添加英雄区域图标动画 */
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
      }
      .fa-wrench {
        animation: pulse 3s infinite;
      }
    }
  </style>
</head>

<body class="font-inter text-dark">
  <!-- 海滩阳光动态背景 -->
  <div class="fixed inset-0 z-[-1]" id="starry-background">
    <div class="wave-container">
      <div class="wave"></div>
      <div class="wave"></div>
    </div>
    <div class="cloud"></div>
    <div class="cloud" style="top: 150px; left: 300px; width: 100px; height: 40px; animation: cloudMove 45s linear infinite;"></div>
    <div class="cloud" style="top: 80px; left: 600px; width: 120px; height: 50px; animation: cloudMove 60s linear infinite;"></div>
  </div>
  
  <!-- 工具区域 -->
  <section class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12 text-white">软件测试实用工具集</h2>
    <style>
      /* 海滩阳光动态背景 */
      #starry-background {
        position: fixed;
        overflow: hidden;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: -1;
        background: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 70%, #FFD700 70%, #FFD700 75%, #F4A460 75%, #F4A460 100%);
      }
      
      /* 太阳 */
      #starry-background::before {
        content: '';
        position: absolute;
        top: 50px;
        right: 100px;
        width: 80px;
        height: 80px;
        background: radial-gradient(circle, #FFD700, #FFA500);
        border-radius: 50%;
        box-shadow: 0 0 50px rgba(255, 215, 0, 0.8), 0 0 100px rgba(255, 165, 0, 0.5);
        animation: sunPulse 4s infinite alternate;
      }
      
      /* 沙滩 */
      #starry-background::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 25%;
        background: linear-gradient(to top, #DEB887, #F4A460);
      }
      
      /* 海浪容器 */
      .wave-container {
        position: absolute;
        bottom: 25%;
        left: 0;
        right: 0;
        height: 15%;
        overflow: hidden;
      }
      
      /* 海浪 */
      .wave {
        position: absolute;
        width: 200%;
        height: 100%;
        background: linear-gradient(to bottom, transparent, #1E90FF);
        border-radius: 50% 50% 0 0;
        animation: wave 10s linear infinite;
      }
      
      .wave:nth-child(2) {
        bottom: 10px;
        height: 80%;
        background: linear-gradient(to bottom, transparent, #87CEEB);
        animation: wave 12s linear infinite reverse;
        opacity: 0.8;
      }
      
      /* 动画效果 */
      @keyframes sunPulse {
        from { transform: scale(1); }
        to { transform: scale(1.1); }
      }
      
      @keyframes wave {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
      }
      
      /* 云朵 */
      .cloud {
        position: absolute;
        top: 100px;
        width: 150px;
        height: 60px;
        background: white;
        border-radius: 30px;
        opacity: 0.8;
        animation: cloudMove 30s linear infinite;
      }
      
      .cloud:before,
      .cloud:after {
        content: '';
        position: absolute;
        background: white;
        border-radius: 50%;
      }
      
      .cloud:before {
        width: 80px;
        height: 80px;
        top: -40px;
        left: 30px;
      }
      
      .cloud:after {
        width: 60px;
        height: 60px;
        top: -20px;
        right: 30px;
      }
      
      @keyframes cloudMove {
        from { transform: translateX(-200px); }
        to { transform: translateX(100vw); }
      }
      
      /* 模态框样式 */
      .preview-modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }
      
      .modal-content {
        background: white;
        padding: 20px;
        border-radius: 8px;
        max-width: 90%;
        width: 500px;
        text-align: center;
        position: relative;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      }
      
      .modal-close {
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #666;
        z-index: 10;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s;
      }
      
      .modal-close:hover {
        background-color: #f0f0f0;
        color: #333;
      }
      
      /* 预览容器样式 */
      .barcode-preview-container {
        margin: 20px 0;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      
      /* 大小调节滑块 */
      .size-control {
        margin: 15px 0;
        width: 100%;
        max-width: 300px;
      }
      
      .size-control label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #333;
      }
      
      .size-control input {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
      }
      
      .size-control input::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #4CAF50;
        cursor: pointer;
      }
      
      .size-control input::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #4CAF50;
        cursor: pointer;
      }
    </style>
      <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">
        我们提供多种实用工具，帮助您更高效地完成工作和学习任务。所有工具完全免费，无需安装，即开即用。
      </p>

      <!-- 工具选项卡 -->
      <div class="mb-10">
        <div class="flex overflow-x-auto space-x-2 pb-2 scrollbar-hide">
          <button class="tool-tab active whitespace-nowrap px-6 py-3 bg-primary text-white rounded-lg shadow-sm" data-target="id-card-generator">
            <i class="fa fa-id-card mr-2"></i> 证件号码生成
          </button>
          <button class="tool-tab whitespace-nowrap px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-sm transition-colors" data-target="phone-generator">
            <i class="fa fa-mobile mr-2"></i> 手机号生成
          </button>
          <button class="tool-tab whitespace-nowrap px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-sm transition-colors" data-target="json-parser">
            <i class="fa fa-code mr-2"></i> JSON解析
          </button>
          <button class="tool-tab whitespace-nowrap px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-sm transition-colors" data-target="string-generator">
            <i class="fa fa-random mr-2"></i> 随机字符串
          </button>
          <button class="tool-tab whitespace-nowrap px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-sm transition-colors" data-target="length-calculator">
            <i class="fa fa-calculator mr-2"></i> 字符计算
          </button>
          <button class="tool-tab whitespace-nowrap px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-sm transition-colors" data-target="barcode-generator">
            <i class="fa fa-barcode mr-2"></i> 条形码生成
          </button>
        </div>
      </div>

      <!-- 证件号码生成器 -->
      <div id="id-card-generator" class="tool-content mb-20 block">
        <h2 class="section-title">证件号码生成器</h2>
        
        <div class="tool-card mt-8">
          <div class="grid md:grid-cols-12 gap-8">
            <div class="md:col-span-5">
              <div class="space-y-4">
                <div>
                  <label class="block text-gray-700 font-medium mb-2">
                    证件类型
                  </label>
                  <div class="grid grid-cols-2 gap-3">
                    <button class="id-type-btn bg-primary text-white py-2 px-4 rounded-lg" data-type="id">
                      身份证
                    </button>
                    <button class="id-type-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-lg" data-type="hk-residence">
                      港澳居住证
                    </button>
                    <button class="id-type-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-lg" data-type="tw-residence">
                      台湾居住证
                    </button>
                    <button class="id-type-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-lg" data-type="hk-pass">
                      港澳通行证
                    </button>
                    <button class="id-type-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-lg" data-type="tw-pass">
                      台湾通行证
                    </button>
                    <button class="id-type-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-lg" data-type="foreign">
                      外国人居留证
                    </button>
                  </div>
                </div>

                <div>
                  <label class="block text-gray-700 font-medium mb-2" for="id-count">
                    生成数量
                  </label>
                  <input type="number" id="id-count" class="input-field" min="1" max="50" value="1">
                </div>

                <div class="flex space-x-3">
                  <button id="generate-ids" class="btn-primary flex-1 flex items-center justify-center">
                    <i class="fa fa-id-card mr-2"></i> 生成证件号码
                  </button>
                  <button id="copy-ids" class="btn-secondary flex-1 flex items-center justify-center" disabled>
                    <i class="fa fa-copy mr-2"></i> 复制所有
                  </button>
                </div>
              </div>
            </div>

            <div class="md:col-span-7">
              <label class="block text-gray-700 font-medium mb-2">
                生成结果
              </label>
              <div class="border border-gray-200 rounded-lg p-4 h-64 overflow-y-auto bg-gray-50" id="id-results">
                <div class="text-gray-500 italic text-center py-10">
                  选择证件类型并点击生成按钮
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 手机号生成器 -->
      <div id="phone-generator" class="tool-content mb-20 hidden">
        <h2 class="section-title">手机号生成器</h2>
        
        <div class="tool-card mt-8">
          <div class="grid md:grid-cols-12 gap-8">
            <div class="md:col-span-5">
              <div class="space-y-4">
                <div>
                  <label class="block text-gray-700 font-medium mb-2" for="phone-count">
                    生成数量
                  </label>
                  <input type="number" id="phone-count" class="input-field" min="1" max="50" value="5">
                </div>

                <div class="flex items-center">
                  <input type="checkbox" id="include-carrier" class="w-4 h-4 text-primary" checked>
                  <label for="include-carrier" class="ml-2 text-gray-700">显示运营商信息</label>
                </div>

                <div class="flex space-x-3">
                  <button id="generate-phones" class="btn-primary flex-1 flex items-center justify-center">
                    <i class="fa fa-mobile mr-2"></i> 生成手机号
                  </button>
                  <button id="copy-phones" class="btn-secondary flex-1 flex items-center justify-center" disabled>
                    <i class="fa fa-copy mr-2"></i> 复制所有
                  </button>
                </div>
              </div>
            </div>

            <div class="md:col-span-7">
              <label class="block text-gray-700 font-medium mb-2">
                生成结果
              </label>
              <div class="border border-gray-200 rounded-lg p-4 h-64 overflow-y-auto bg-gray-50" id="phone-results">
                <div class="text-gray-500 italic text-center py-10">
                  点击生成按钮开始创建手机号
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- JSON解析器 -->
      <div id="json-parser" class="tool-content mb-20 hidden">
        <h2 class="section-title">JSON在线解析</h2>
        
        <div class="tool-card mt-8">
          <div class="space-y-6">
            <div class="grid md:grid-cols-2 gap-8">
              <div>
                <label class="block text-gray-700 font-medium mb-2" for="json-input">
                  JSON输入
                </label>
                <textarea id="json-input" class="input-field h-64 resize-none" placeholder="请输入JSON字符串..."></textarea>
              </div>
              <div>
                <label class="block text-gray-700 font-medium mb-2" for="json-output">
                  格式化结果
                </label>
                <div class="border border-gray-200 rounded-lg p-4 h-64 overflow-y-auto bg-gray-50 font-mono text-sm" id="json-output">
                  <div class="text-gray-500 italic text-center py-10">
                    输入JSON并点击格式化按钮
                  </div>
                </div>
              </div>
            </div>

            <div class="flex space-x-4 justify-center">
              <button id="format-json" class="btn-primary flex items-center">
                <i class="fa fa-code mr-2"></i> 格式化JSON
              </button>
              <button id="minify-json" class="btn-secondary flex items-center" disabled>
                <i class="fa fa-compress mr-2"></i> 压缩JSON
              </button>
              <button id="copy-json" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg transition-all duration-200 flex items-center" disabled>
                <i class="fa fa-copy mr-2"></i> 复制结果
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 随机字符串生成器 -->
      <div id="string-generator" class="tool-content mb-20 hidden">
        <h2 class="section-title">随机字符串生成器</h2>
        
        <div class="tool-card mt-8">
          <div class="grid md:grid-cols-12 gap-8">
            <div class="md:col-span-5">
              <div class="space-y-4">
                <div>
                  <label class="block text-gray-700 font-medium mb-2" for="str-length">
                    字符串长度
                  </label>
                  <input type="number" id="str-length" class="input-field" min="1" max="1000" value="10">
                </div>
                
                <div>
                  <label class="block text-gray-700 font-medium mb-2">
                    字符类型
                  </label>
                  <div class="grid grid-cols-2 gap-3">
                    <label class="flex items-center space-x-2 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                      <input type="checkbox" id="include-uppercase" class="form-checkbox text-primary h-5 w-5" checked>
                      <span>大写字母 (A-Z)</span>
                    </label>
                    <label class="flex items-center space-x-2 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                      <input type="checkbox" id="include-lowercase" class="form-checkbox text-primary h-5 w-5" checked>
                      <span>小写字母 (a-z)</span>
                    </label>
                    <label class="flex items-center space-x-2 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                      <input type="checkbox" id="include-numbers" class="form-checkbox text-primary h-5 w-5" checked>
                      <span>数字 (0-9)</span>
                    </label>
                    <label class="flex items-center space-x-2 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                      <input type="checkbox" id="include-symbols" class="form-checkbox text-primary h-5 w-5">
                      <span>特殊字符 (!@#$等)</span>
                    </label>
                  </div>
                </div>
                
                <div>
                  <label class="block text-gray-700 font-medium mb-2" for="str-count">
                    生成数量
                  </label>
                  <input type="number" id="str-count" class="input-field" min="1" max="100" value="1">
                </div>
                
                <div>
                  <button id="generate-strings" class="btn-primary w-full flex items-center justify-center">
                    <i class="fa fa-refresh mr-2"></i> 生成随机字符串
                  </button>
                </div>
              </div>
            </div>
            
            <div class="md:col-span-7">
              <label class="block text-gray-700 font-medium mb-2">
                生成结果
              </label>
              <div class="border border-gray-200 rounded-lg p-4 h-64 overflow-y-auto bg-gray-50 mb-4" id="string-results">
                <div class="text-gray-500 italic text-center py-10">
                  点击生成按钮开始创建随机字符串
                </div>
              </div>
              <button id="copy-strings" class="btn-secondary w-full flex items-center justify-center">
                <i class="fa fa-copy mr-2"></i> 复制所有结果
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 字符长度计算器 -->
      <div id="length-calculator" class="tool-content mb-20 hidden">
        <h2 class="section-title">字符长度计算器</h2>
        
        <div class="tool-card mt-8">
          <div class="grid md:grid-cols-12 gap-8">
            <div class="md:col-span-7">
              <label class="block text-gray-700 font-medium mb-2" for="text-input">
                输入文本
              </label>
              <textarea id="text-input" class="input-field h-40 resize-none" placeholder="请输入需要计算长度的文本..."></textarea>
              
              <div class="mt-4 flex gap-4">
                <button id="calculate-length" class="btn-primary flex-1 flex items-center justify-center">
                  <i class="fa fa-calculator mr-2"></i> 计算长度
                </button>
                <button id="clear-text" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg transition-all duration-200">
                  <i class="fa fa-eraser"></i>
                </button>
              </div>
            </div>
            
            <div class="md:col-span-5">
              <label class="block text-gray-700 font-medium mb-2">
                计算结果
              </label>
              <div class="bg-gray-50 rounded-lg p-6 h-64 flex flex-col justify-center">
                <div class="grid grid-cols-2 gap-6 text-center">
                  <div class="p-4 bg-white rounded-lg shadow-sm">
                    <p class="text-gray-500 text-sm mb-1">字符总数</p>
                    <p class="text-3xl font-bold text-primary" id="total-chars">0</p>
                  </div>
                  <div class="p-4 bg-white rounded-lg shadow-sm">
                    <p class="text-gray-500 text-sm mb-1">字节数 (UTF-8)</p>
                    <p class="text-3xl font-bold text-primary" id="byte-count">0</p>
                  </div>
                  <div class="p-4 bg-white rounded-lg shadow-sm">
                    <p class="text-gray-500 text-sm mb-1">空格数</p>
                    <p class="text-3xl font-bold text-primary" id="space-count">0</p>
                  </div>
                  <div class="p-4 bg-white rounded-lg shadow-sm">
                    <p class="text-gray-500 text-sm mb-1">行数</p>
                    <p class="text-3xl font-bold text-primary" id="line-count">0</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 条形码生成器 -->
      <div id="barcode-generator" class="tool-content mb-20 hidden">
        <h2 class="section-title">条形码生成器</h2>
        
        <div class="tool-card mt-8">
          <div class="space-y-6">
            <div class="mb-6">
              <label class="block text-gray-700 font-medium mb-2" for="barcode-string">
                输入要生成条形码的字符串（一行一个）
              </label>
              <textarea id="barcode-string" class="input-field h-32" placeholder="例如: ABC123456789\nDEF987654321"></textarea>
              <p class="text-sm text-gray-500 mt-1">支持CODE128格式，可包含字母、数字和部分特殊字符，每行一个条形码</p>
            </div>
            
            <div class="flex justify-center">
              <button id="generate-barcodes" class="btn-primary flex items-center">
                <i class="fa fa-barcode mr-2"></i> 生成条形码
              </button>
            </div>
            
            <div class="border border-gray-200 rounded-lg p-4 bg-gray-50" id="barcode-results">
              <div class="text-gray-500 italic text-center py-10">
                输入字符串后点击生成按钮创建条形码
              </div>
            </div>
            
            <div class="flex justify-center">
              <button id="download-barcodes" class="btn-secondary flex items-center" disabled>
                <i class="fa fa-download mr-2"></i> 下载所有条形码
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 页脚 -->
  <footer class="bg-dark text-white py-12">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-6 md:mb-0">
          <div class="flex items-center space-x-2">
            <i class="fa fa-wrench text-primary text-2xl"></i>
            <h2 class="text-xl font-bold">测试工具集</h2>
          </div>
          <p class="text-gray-400 mt-2">专业的软件测试辅助工具</p>
        </div>
        
        <div class="flex space-x-6">
          <a href="#" class="text-gray-400 hover:text-primary transition-colors">
            <i class="fa fa-github text-xl"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-primary transition-colors">
            <i class="fa fa-twitter text-xl"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-primary transition-colors">
            <i class="fa fa-envelope text-xl"></i>
          </a>
        </div>
      </div>
      
      <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
        <p>&copy; 2023 测试工具集 - 版权所有</p>
      </div>
    </div>
  </footer>

  <!-- 通知提示组件 -->
  <div id="notification" class="fixed bottom-6 right-6 px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center">
    <i id="notification-icon" class="mr-2"></i>
    <span id="notification-message"></span>
  </div>

  <script>
    // DOM元素
    const notification = document.getElementById('notification');
    const notificationIcon = document.getElementById('notification-icon');
    const notificationMessage = document.getElementById('notification-message');
    const starryBackground = document.getElementById('starry-background');
    
    // 创建流星效果
    function createMeteors() {
      const meteorCount = 15; // 流星数量
      
      for (let i = 0; i < meteorCount; i++) {
        const meteor = document.createElement('div');
        meteor.className = 'meteor';
        
        // 随机位置和大小
        const left = Math.random() * 100;
        const top = -20; // 从顶部外开始
        const height = 30 + Math.random() * 70;
        const delay = Math.random() * 10;
        const duration = 3 + Math.random() * 2;
        const scale = 0.5 + Math.random() * 1.5;
        
        meteor.style.left = `${left}%`;
        meteor.style.top = `${top}px`;
        meteor.style.height = `${height}px`;
        meteor.style.animationDelay = `${delay}s`;
        meteor.style.animationDuration = `${duration}s`;
        meteor.style.transform = `scale(${scale}) rotate(-45deg)`;
        
        starryBackground.appendChild(meteor);
      }
    }
    
    // 初始化流星
    createMeteors();
    
    // 字符串生成器元素
    const strLengthInput = document.getElementById('str-length');
    const includeUppercase = document.getElementById('include-uppercase');
    const includeLowercase = document.getElementById('include-lowercase');
    const includeNumbers = document.getElementById('include-numbers');
    const includeSymbols = document.getElementById('include-symbols');
    const strCountInput = document.getElementById('str-count');
    const generateStringsBtn = document.getElementById('generate-strings');
    const stringResults = document.getElementById('string-results');
    const copyStringsBtn = document.getElementById('copy-strings');
    
    // 长度计算器元素
    const textInput = document.getElementById('text-input');
    const calculateLengthBtn = document.getElementById('calculate-length');
    const clearTextBtn = document.getElementById('clear-text');
    const totalCharsEl = document.getElementById('total-chars');
    const byteCountEl = document.getElementById('byte-count');
    const spaceCountEl = document.getElementById('space-count');
    const lineCountEl = document.getElementById('line-count');
    
    // 条形码生成器元素
    const barcodePrefix = document.getElementById('barcode-prefix');
    const barcodeStart = document.getElementById('barcode-start');
    const barcodeCount = document.getElementById('barcode-count');
    const generateBarcodesBtn = document.getElementById('generate-barcodes');
    const barcodeResults = document.getElementById('barcode-results');
    const downloadBarcodesBtn = document.getElementById('download-barcodes');
    

    
    // 显示通知
    function showNotification(message, isSuccess = true) {
      notificationMessage.textContent = message;
      
      if (isSuccess) {
        notification.classList.add('bg-green-500');
        notification.classList.remove('bg-red-500');
        notificationIcon.className = 'fa fa-check-circle mr-2';
      } else {
        notification.classList.add('bg-red-500');
        notification.classList.remove('bg-green-500');
        notificationIcon.className = 'fa fa-exclamation-circle mr-2';
      }
      
      notification.classList.remove('translate-y-20', 'opacity-0');
      notification.classList.add('translate-y-0', 'opacity-100');
      
      setTimeout(() => {
        notification.classList.remove('translate-y-0', 'opacity-100');
        notification.classList.add('translate-y-20', 'opacity-0');
      }, 3000);
    }
    
    // 随机字符串生成器
    generateStringsBtn.addEventListener('click', () => {
      const length = parseInt(strLengthInput.value);
      const count = parseInt(strCountInput.value);
      
      // 验证输入
      if (isNaN(length) || length < 1 || length > 1000) {
        showNotification('请输入有效的字符串长度（1-1000）', false);
        return;
      }
      
      if (isNaN(count) || count < 1 || count > 100) {
        showNotification('请输入有效的生成数量（1-100）', false);
        return;
      }
      
      // 检查至少选择了一种字符类型
      if (!includeUppercase.checked && !includeLowercase.checked && 
          !includeNumbers.checked && !includeSymbols.checked) {
        showNotification('请至少选择一种字符类型', false);
        return;
      }
      
      // 生成字符集
      let charset = '';
      if (includeUppercase.checked) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      if (includeLowercase.checked) charset += 'abcdefghijklmnopqrstuvwxyz';
      if (includeNumbers.checked) charset += '0123456789';
      if (includeSymbols.checked) charset += '!@#$%^&*()_+~`|}{[]:;?><,./-=';
      
      // 生成随机字符串
      const results = [];
      for (let i = 0; i < count; i++) {
        let str = '';
        for (let j = 0; j < length; j++) {
          const randomIndex = Math.floor(Math.random() * charset.length);
          str += charset[randomIndex];
        }
        results.push(str);
      }
      
      // 显示结果
      displayStrings(results);
    });
    
    // 显示生成的字符串
    function displayStrings(strings) {
      stringResults.innerHTML = '';
      
      strings.forEach((str, index) => {
        const stringItem = document.createElement('div');
        stringItem.className = 'flex items-center p-2 border-b border-gray-200 last:border-0 hover:bg-gray-100 transition-colors';
        
        const indexSpan = document.createElement('span');
        indexSpan.className = 'w-8 h-8 rounded-full bg-primary/10 text-primary flex items-center justify-center mr-3 flex-shrink-0';
        indexSpan.textContent = index + 1;
        
        const stringSpan = document.createElement('span');
        stringSpan.className = 'flex-grow break-all font-mono text-sm';
        stringSpan.textContent = str;
        
        const copyBtn = document.createElement('button');
        copyBtn.className = 'text-gray-400 hover:text-primary transition-colors p-2';
        copyBtn.innerHTML = '<i class="fa fa-copy"></i>';
        copyBtn.title = '复制此字符串';
        copyBtn.addEventListener('click', () => {
          navigator.clipboard.writeText(str)
            .then(() => showNotification('字符串已复制'))
            .catch(() => showNotification('复制失败', false));
        });
        
        stringItem.appendChild(indexSpan);
        stringItem.appendChild(stringSpan);
        stringItem.appendChild(copyBtn);
        stringResults.appendChild(stringItem);
      });
    }
    
    // 复制所有字符串
    copyStringsBtn.addEventListener('click', () => {
      const items = stringResults.querySelectorAll('span:nth-child(2)');
      if (items.length === 0) {
        showNotification('没有可复制的内容', false);
        return;
      }
      
      const textToCopy = Array.from(items).map(item => item.textContent).join('\n');
      
      navigator.clipboard.writeText(textToCopy)
        .then(() => showNotification('所有字符串已复制'))
        .catch(() => showNotification('复制失败', false));
    });
    
    // 字符长度计算
    calculateLengthBtn.addEventListener('click', calculateTextStats);
    
    // 实时计算（输入时）
    textInput.addEventListener('input', calculateTextStats);
    
    // 清空文本
    clearTextBtn.addEventListener('click', () => {
      textInput.value = '';
      calculateTextStats();
    });
    
    // 计算文本统计信息
    function calculateTextStats() {
      const text = textInput.value;
      
      // 字符总数
      const totalChars = text.length;
      
      // 字节数 (UTF-8)
      const byteCount = new TextEncoder().encode(text).length;
      
      // 空格数
      const spaceCount = (text.match(/\s/g) || []).length;
      
      // 行数
      const lineCount = text === '' ? 0 : text.split('\n').length;
      
      // 更新显示，添加数字变化动画
      animateNumberChange(totalCharsEl, totalChars);
      animateNumberChange(byteCountEl, byteCount);
      animateNumberChange(spaceCountEl, spaceCount);
      animateNumberChange(lineCountEl, lineCount);
    }
    
    // 数字变化动画
    function animateNumberChange(element, targetValue) {
      const startValue = parseInt(element.textContent);
      const duration = 300; // 动画持续时间（毫秒）
      const startTime = performance.now();
      
      function updateNumber(currentTime) {
        const elapsedTime = currentTime - startTime;
        if (elapsedTime < duration) {
          const progress = elapsedTime / duration;
          // 使用easeOutQuad缓动函数使动画更自然
          const easeProgress = 1 - (1 - progress) * (1 - progress);
          const currentValue = Math.floor(startValue + (targetValue - startValue) * easeProgress);
          element.textContent = currentValue;
          requestAnimationFrame(updateNumber);
        } else {
          element.textContent = targetValue;
        }
      }
      
      requestAnimationFrame(updateNumber);
    }
    
    // 初始化
    window.addEventListener('DOMContentLoaded', () => {
      // 触发一次计算以显示初始状态
      calculateTextStats();
      
      // 获取按钮元素
      const generateBarcodesBtn = document.getElementById('generate-barcodes');
      const downloadBarcodesBtn = document.getElementById('download-barcodes');
      const barcodeResults = document.getElementById('barcode-results');
      
      // 条形码生成
      generateBarcodesBtn.addEventListener('click', () => {
        const inputText = document.getElementById('barcode-string').value.trim();
        
        if (!inputText) {
          showNotification('请输入要生成条形码的字符串', false);
          return;
        }
        
        // 分割多行输入
        const codes = inputText.split('\n')
          .map(line => line.trim())
          .filter(line => line.length > 0);
        
        if (codes.length === 0) {
          showNotification('请输入有效的条形码字符串', false);
          return;
        }
        
        barcodeResults.innerHTML = '';
        const grid = document.createElement('div');
        grid.className = 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-8';
        
        // 确保JsBarcode已加载
        if (typeof JsBarcode !== 'undefined') {
          // 为每个代码生成条形码
          codes.forEach((code, index) => {
            const barcodeContainer = document.createElement('div');
            barcodeContainer.className = 'bg-white p-6 rounded-lg shadow-sm flex flex-col items-center';
            
            // 创建Canvas元素
            const canvas = document.createElement('canvas');
            canvas.id = `barcode-${index}`;
            canvas.className = 'mx-auto mb-4';
            
            // 创建文本标签
            const codeText = document.createElement('p');
            codeText.className = 'text-sm font-medium text-gray-700 text-center break-words max-w-full';
            codeText.textContent = code;
            
            // 添加点击预览功能
              barcodeContainer.style.cursor = 'pointer';
              barcodeContainer.addEventListener('click', () => {
                const modal = document.createElement('div');
                modal.className = 'preview-modal';
                modal.innerHTML = `
                  <div class="modal-content">
                    <button class="modal-close">&times;</button>
                    <h3 class="text-xl font-bold mb-4">条形码预览</h3>
                    <div class="barcode-preview-container">
                      <canvas id="preview-barcode"></canvas>
                      <div class="size-control">
                        <label for="size-slider">调整大小: <span id="size-value">200</span>%</label>
                        <input type="range" id="size-slider" min="50" max="300" value="200">
                      </div>
                    </div>
                    <p class="text-gray-700 font-medium">${code}</p>
                  </div>
                `;
                
                // 获取元素
                const previewCanvas = modal.querySelector('#preview-barcode');
                const sizeSlider = modal.querySelector('#size-slider');
                const sizeValue = modal.querySelector('#size-value');
                
                // 初始绘制条形码
                let currentScale = 2.0; // 初始200%缩放
                updateBarcodeSize(currentScale);
                
                // 更新条形码大小的函数
                function updateBarcodeSize(scale) {
                  // 清除Canvas并重新绘制
                  const ctx = previewCanvas.getContext('2d');
                  ctx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);
                  
                  // 设置缩放
                  previewCanvas.style.transform = `scale(${scale})`;
                  previewCanvas.style.transformOrigin = 'center';
                  
                  // 重新生成条形码
                  JsBarcode(previewCanvas, code, {
                    format: "CODE128",
                    width: 2,
                    height: 160,
                    displayValue: false
                  });
                }
                
                // 监听滑块变化
                sizeSlider.addEventListener('input', () => {
                  const scale = parseInt(sizeSlider.value) / 100;
                  sizeValue.textContent = sizeSlider.value;
                  updateBarcodeSize(scale);
                });
                
                // 关闭按钮
                const closeBtn = modal.querySelector('.modal-close');
                closeBtn.addEventListener('click', () => {
                  modal.remove();
                });
                
                // 点击背景关闭
                modal.addEventListener('click', (e) => {
                  if (e.target === modal) {
                    modal.remove();
                  }
                });
                
                // ESC键关闭
                document.addEventListener('keydown', function handleEsc(e) {
                  if (e.key === 'Escape') {
                    modal.remove();
                    document.removeEventListener('keydown', handleEsc);
                  }
                });
                
                document.body.appendChild(modal);
              });

            barcodeContainer.appendChild(canvas);
            barcodeContainer.appendChild(codeText);
            grid.appendChild(barcodeContainer);
            
            // 使用JsBarcode生成条形码
            JsBarcode(canvas, code, {
              format: "CODE128",
              width: 2,
              height: 80,
              displayValue: false
            });
          });
          
          barcodeResults.appendChild(grid);
          showNotification(`已生成 ${codes.length} 个条形码`);
          downloadBarcodesBtn.disabled = false;
        } else {
          showNotification('条形码库加载失败，请刷新页面重试', false);
        }
      });
    });
    
    // 生成并显示条形码
    function generateBarcodes(prefix, start, count) {
      barcodeResults.innerHTML = '';
      
      // 创建网格容器
      const grid = document.createElement('div');
        grid.className = 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-8';
      
      for (let i = 0; i < count; i++) {
        const code = prefix + (start + i);
        
        // 创建条形码容器
        const barcodeContainer = document.createElement('div');
        barcodeContainer.className = 'bg-white p-4 rounded-lg shadow-sm text-center';
        
        // 创建canvas元素用于绘制条形码
        const canvas = document.createElement('canvas');
        canvas.id = `barcode-${i}`;
        canvas.className = 'mx-auto mb-2';
        
        // 创建文本标签
        const codeText = document.createElement('p');
        codeText.className = 'text-sm font-medium text-gray-700 truncate';
        codeText.textContent = code;
        
        // 添加点击预览功能
          barcodeContainer.style.cursor = 'pointer';
          barcodeContainer.addEventListener('click', () => {
            const modal = document.createElement('div');
            modal.className = 'preview-modal';
            modal.innerHTML = `
              <div class="modal-content">
                <button class="modal-close">&times;</button>
                <h3 class="text-xl font-bold mb-4">条形码预览</h3>
                <div class="barcode-preview-container">
                  <canvas id="preview-barcode"></canvas>
                  <div class="size-control">
                    <label for="size-slider">调整大小: <span id="size-value">200</span>%</label>
                    <input type="range" id="size-slider" min="50" max="300" value="200">
                  </div>
                </div>
                <p class="text-gray-700 font-medium">${code}</p>
              </div>
            `;
            
            // 获取元素
            const previewCanvas = modal.querySelector('#preview-barcode');
            const sizeSlider = modal.querySelector('#size-slider');
            const sizeValue = modal.querySelector('#size-value');
            
            // 初始绘制条形码
            let currentScale = 2.0; // 初始200%缩放
            updateBarcodeSize(currentScale);
            
            // 更新条形码大小的函数
            function updateBarcodeSize(scale) {
              // 清除Canvas并重新绘制
              const ctx = previewCanvas.getContext('2d');
              ctx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);
              
              // 设置缩放
              previewCanvas.style.transform = `scale(${scale})`;
              previewCanvas.style.transformOrigin = 'center';
              
              // 重新生成条形码
              JsBarcode(previewCanvas, code, {
                format: "CODE128",
                width: 2,
                height: 120,
                displayValue: false
              });
            }
            
            // 监听滑块变化
            sizeSlider.addEventListener('input', () => {
              const scale = parseInt(sizeSlider.value) / 100;
              sizeValue.textContent = sizeSlider.value;
              updateBarcodeSize(scale);
            });
            
            // 关闭按钮
            const closeBtn = modal.querySelector('.modal-close');
            closeBtn.addEventListener('click', () => {
              modal.remove();
            });
            
            // 点击背景关闭
            modal.addEventListener('click', (e) => {
              if (e.target === modal) {
                modal.remove();
              }
            });
            
            // ESC键关闭
            document.addEventListener('keydown', function handleEsc(e) {
              if (e.key === 'Escape') {
                modal.remove();
                document.removeEventListener('keydown', handleEsc);
              }
            });
            
            document.body.appendChild(modal);
          });

        barcodeContainer.appendChild(canvas);
        barcodeContainer.appendChild(codeText);
        grid.appendChild(barcodeContainer);
        
        // 使用JsBarcode生成条形码
        JsBarcode(canvas, code, {
          format: "CODE128",
          width: 2,
          height: 60,
          displayValue: false
        });
      }
      
      barcodeResults.appendChild(grid);
      showNotification(`已生成 ${count} 个条形码`);
    }
    
    // 下载条形码（模拟，实际项目中需要使用Canvas或SVG转图片库）
    downloadBarcodesBtn.addEventListener('click', () => {
      showNotification('批量下载功能已触发（实际项目中会打包所有条形码为ZIP文件）');
    });
    
    // 工具选项卡切换功能
    document.addEventListener('DOMContentLoaded', () => {
      // 选项卡切换
      const toolTabs = document.querySelectorAll('.tool-tab');
      const toolContents = document.querySelectorAll('.tool-content');

      toolTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          // 移除所有选项卡的active类
          toolTabs.forEach(t => t.classList.remove('active', 'bg-primary', 'text-white'));
          toolTabs.forEach(t => t.classList.add('bg-gray-200', 'text-gray-700'));

          // 为当前选项卡添加active类
          tab.classList.add('active', 'bg-primary', 'text-white');
          tab.classList.remove('bg-gray-200', 'text-gray-700');

          // 隐藏所有内容
          toolContents.forEach(content => content.classList.add('hidden'));

          // 显示当前内容
          const target = tab.getAttribute('data-target');
          document.getElementById(target).classList.remove('hidden');
        });
      });

      // 证件类型选择按钮
      const idTypeBtns = document.querySelectorAll('.id-type-btn');
      idTypeBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          // 移除所有按钮的active类
          idTypeBtns.forEach(b => b.classList.remove('bg-primary', 'text-white'));
          idTypeBtns.forEach(b => b.classList.add('bg-gray-200', 'text-gray-700'));

          // 为当前按钮添加active类
          btn.classList.add('bg-primary', 'text-white');
          btn.classList.remove('bg-gray-200', 'text-gray-700');
        });
      });

      // 证件号码生成器
      const generateIdsBtn = document.getElementById('generate-ids');
      const copyIdsBtn = document.getElementById('copy-ids');
      const idResults = document.getElementById('id-results');
      const idCountInput = document.getElementById('id-count');

      generateIdsBtn.addEventListener('click', () => {
        const count = parseInt(idCountInput.value);
        const activeTypeBtn = document.querySelector('.id-type-btn.bg-primary');
        const idType = activeTypeBtn ? activeTypeBtn.getAttribute('data-type') : 'id';

        if (isNaN(count) || count < 1 || count > 50) {
          showNotification('请输入有效的生成数量（1-50）', false);
          return;
        }

        const results = [];
        for (let i = 0; i < count; i++) {
          switch(idType) {
            case 'id':
              results.push(generateChineseId());
              break;
            case 'hk-residence':
              results.push(generateHK居住证());
              break;
            case 'tw-residence':
              results.push(generateTW居住证());
              break;
            case 'hk-pass':
              results.push(generateHK通行证());
              break;
            case 'tw-pass':
              results.push(generateTW通行证());
              break;
            case 'foreign':
              results.push(generateForeignResidencePermit());
              break;
            default:
              results.push(generateChineseId());
          }
        }

        displayIds(results);
      });

      // 显示生成的证件号码
      function displayIds(ids) {
        idResults.innerHTML = '';

        ids.forEach((item, index) => {
          const idItem = document.createElement('div');
          idItem.className = 'flex items-center justify-between p-3 border-b border-gray-200 last:border-0 hover:bg-gray-100 transition-colors';

          const infoDiv = document.createElement('div');

          const nameSpan = document.createElement('span');
          nameSpan.className = 'block text-sm text-gray-500';
          nameSpan.textContent = `姓名: ${item.name}`;

          const idSpan = document.createElement('span');
          idSpan.className = 'font-mono text-sm';
          idSpan.textContent = item.id;

          infoDiv.appendChild(nameSpan);
          infoDiv.appendChild(idSpan);

          const copyBtn = document.createElement('button');
          copyBtn.className = 'text-gray-400 hover:text-primary transition-colors p-2';
          copyBtn.innerHTML = '<i class="fa fa-copy"></i>';
          copyBtn.title = '复制此证件号码';
          copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(item.id)
              .then(() => showNotification('证件号码已复制'))
              .catch(() => showNotification('复制失败', false));
          });

          idItem.appendChild(infoDiv);
          idItem.appendChild(copyBtn);
          idResults.appendChild(idItem);
        });

        copyIdsBtn.disabled = false;
      }

      // 复制所有证件号码
      copyIdsBtn.addEventListener('click', () => {
        // 使用更精确的选择器避免选择嵌套div
        const items = idResults.querySelectorAll('.flex.items-center.justify-between');
        if (items.length === 0) {
          showNotification('没有可复制的内容', false);
          return;
        }

        const textToCopy = Array.from(items).map(item => {
          const idSpan = item.querySelector('span:nth-child(2)');
          return idSpan ? idSpan.textContent : '';
        }).filter(text => text).join('\n');

        navigator.clipboard.writeText(textToCopy)
          .then(() => showNotification('所有证件号码已复制'))
          .catch(() => showNotification('复制失败', false));
      });

      // 手机号生成器
      const generatePhonesBtn = document.getElementById('generate-phones');
      const copyPhonesBtn = document.getElementById('copy-phones');
      const phoneResults = document.getElementById('phone-results');
      const phoneCountInput = document.getElementById('phone-count');
      const includeCarrierCheckbox = document.getElementById('include-carrier');

      generatePhonesBtn.addEventListener('click', () => {
        const count = parseInt(phoneCountInput.value);
        const includeCarrier = includeCarrierCheckbox.checked;

        if (isNaN(count) || count < 1 || count > 50) {
          showNotification('请输入有效的生成数量（1-50）', false);
          return;
        }

        const results = [];
        for (let i = 0; i < count; i++) {
          results.push(generatePhoneNumber(includeCarrier));
        }

        displayPhones(results, includeCarrier);
      });

      // 显示生成的手机号
      function displayPhones(phones, includeCarrier) {
        phoneResults.innerHTML = '';

        phones.forEach((item, index) => {
          const phoneItem = document.createElement('div');
          phoneItem.className = 'flex items-center justify-between p-3 border-b border-gray-200 last:border-0 hover:bg-gray-100 transition-colors';

          const infoDiv = document.createElement('div');

          const phoneSpan = document.createElement('span');
          phoneSpan.className = 'font-mono text-sm';
          phoneSpan.textContent = item.number;

          infoDiv.appendChild(phoneSpan);

          if (includeCarrier) {
            const carrierSpan = document.createElement('span');
            carrierSpan.className = 'block text-xs text-gray-500';
            carrierSpan.textContent = `运营商: ${item.carrier}`;
            infoDiv.appendChild(carrierSpan);
          }

          const copyBtn = document.createElement('button');
          copyBtn.className = 'text-gray-400 hover:text-primary transition-colors p-2';
          copyBtn.innerHTML = '<i class="fa fa-copy"></i>';
          copyBtn.title = '复制此手机号';
          copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(item.number)
              .then(() => showNotification('手机号已复制'))
              .catch(() => showNotification('复制失败', false));
          });

          phoneItem.appendChild(infoDiv);
          phoneItem.appendChild(copyBtn);
          phoneResults.appendChild(phoneItem);
        });

        copyPhonesBtn.disabled = false;
      }

      // 复制所有手机号
      copyPhonesBtn.addEventListener('click', () => {
        // 使用更精确的选择器避免选择嵌套div
        const items = phoneResults.querySelectorAll('.flex.items-center.justify-between');
        if (items.length === 0) {
          showNotification('没有可复制的内容', false);
          return;
        }

        const textToCopy = Array.from(items).map(item => {
          const phoneSpan = item.querySelector('span:nth-child(1)');
          return phoneSpan ? phoneSpan.textContent : '';
        }).filter(text => text).join('\n');

        navigator.clipboard.writeText(textToCopy)
          .then(() => showNotification('所有手机号已复制'))
          .catch(() => showNotification('复制失败', false));
      });

      // JSON解析器
      const formatJsonBtn = document.getElementById('format-json');
      const minifyJsonBtn = document.getElementById('minify-json');
      const copyJsonBtn = document.getElementById('copy-json');
      const jsonInput = document.getElementById('json-input');
      const jsonOutput = document.getElementById('json-output');

      formatJsonBtn.addEventListener('click', () => {
        const input = jsonInput.value.trim();

        if (!input) {
          showNotification('请输入JSON字符串', false);
          return;
        }

        try {
          const parsed = JSON.parse(input);
          const formatted = JSON.stringify(parsed, null, 2);

          // 使用innerHTML而不是textContent，确保格式正确显示
          jsonOutput.innerHTML = `<pre class="whitespace-pre-wrap">${formatted}</pre>`;
          minifyJsonBtn.disabled = false;
          copyJsonBtn.disabled = false;
          showNotification('JSON格式化成功');
        } catch (error) {
          jsonOutput.innerHTML = `<pre class="text-red-500">解析错误: ${error.message}</pre>`;
          minifyJsonBtn.disabled = true;
          copyJsonBtn.disabled = true;
          showNotification('JSON解析失败', false);
        }
      });

      minifyJsonBtn.addEventListener('click', () => {
        const input = jsonInput.value.trim();

        if (!input) {
          showNotification('请输入JSON字符串', false);
          return;
        }

        try {
          const parsed = JSON.parse(input);
          const minified = JSON.stringify(parsed);

          // 使用innerHTML而不是textContent
          jsonOutput.innerHTML = `<pre class="whitespace-pre-wrap">${minified}</pre>`;
          showNotification('JSON压缩成功');
        } catch (error) {
          jsonOutput.innerHTML = `<pre class="text-red-500">解析错误: ${error.message}</pre>`;
          showNotification('JSON解析失败', false);
        }
      });

      copyJsonBtn.addEventListener('click', () => {
        navigator.clipboard.writeText(jsonOutput.textContent)
          .then(() => showNotification('JSON结果已复制'))
          .catch(() => showNotification('复制失败', false));
      });

      // 初始化
      calculateTextStats();
    });

    // 生成随机中文姓名
    function generateChineseName() {
      const familyNames = ['赵', '钱', '孙', '李', '周', '吴', '郑', '王', '冯', '陈', '褚', '卫', '蒋', '沈', '韩', '杨', '朱', '秦', '尤', '许', '何', '吕', '施', '张', '孔', '曹', '严', '华', '金', '魏', '陶', '姜'];
      const givenNames = ['伟', '芳', '娜', '秀英', '敏', '静', '强', '磊', '军', '洋', '勇', '艳', '杰', '涛', '明', '超', '秀兰', '霞', '平', '刚', '玲', '芳', '强', '军', '英', '梅', '雪', '敏', '静', '丽', '燕', '玲'];

      const familyName = familyNames[Math.floor(Math.random() * familyNames.length)];
      const givenName = givenNames[Math.floor(Math.random() * givenNames.length)];

      return familyName + givenName;
    }

    // 生成中国身份证号
    function generateChineseId() {
      // 前6位地址码（这里使用随机生成）
      const areaCode = Math.floor(100000 + Math.random() * 900000).toString();

      // 中间8位出生日期（1950-2000年之间）
      const year = Math.floor(1950 + Math.random() * 51).toString();
      const month = Math.floor(1 + Math.random() * 12).toString().padStart(2, '0');
      const day = Math.floor(1 + Math.random() * 28).toString().padStart(2, '0');
      const birthDate = year + month + day;

      // 后4位顺序码和校验码
      const sequenceCode = Math.floor(100 + Math.random() * 900).toString();

      // 组合前17位
      const first17 = areaCode + birthDate + sequenceCode;

      // 计算校验码
      const weights = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
      const checkCodes = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];

      let sum = 0;
      for (let i = 0; i < 17; i++) {
        sum += parseInt(first17[i]) * weights[i];
      }
      const checkCode = checkCodes[sum % 11];

      return { name: generateChineseName(), id: first17 + checkCode };
    }

    // 生成港澳居住证
    function generateHK居住证() {
      // 第1位 = 8，第2位 = 1（香港），第3-6位 = 0000
      const prefix = '810000';

      // 生成出生日期（第7-14位）: 19或20开头，月(01-12)，日(01-31)
      const yearPrefix = Math.random() > 0.5 ? '19' : '20';
      const yearSuffix = Math.floor(Math.random() * 100).toString().padStart(2, '0');
      const month = Math.floor(1 + Math.random() * 12).toString().padStart(2, '0');
      const day = Math.floor(1 + Math.random() * 28).toString().padStart(2, '0');
      const birthDate = yearPrefix + yearSuffix + month + day;

      // 第15-17位: 顺序码，第17位奇数为男，偶数为女
      const sequence = Math.floor(100 + Math.random() * 900).toString();
      const genderDigit = Math.random() > 0.5 ? Math.floor(Math.random() * 5) * 2 + 1 : Math.floor(Math.random() * 5) * 2;
      const sequenceWithGender = sequence.substring(0, 2) + genderDigit;

      // 第18位: 校验码（简单生成）
      const checkCode = Math.floor(Math.random() * 10).toString();

      const id = prefix + birthDate + sequenceWithGender + checkCode;

      return { name: generateChineseName(), id: id };
    }

    // 生成台湾居住证
    function generateTW居住证() {
      // 第1位 = 8，第2位 = 3（台湾），第3-6位 = 0000
      const prefix = '830000';

      // 生成出生日期（第7-14位）: 19或20开头，月(01-12)，日(01-31)
      const yearPrefix = Math.random() > 0.5 ? '19' : '20';
      const yearSuffix = Math.floor(Math.random() * 100).toString().padStart(2, '0');
      const month = Math.floor(1 + Math.random() * 12).toString().padStart(2, '0');
      const day = Math.floor(1 + Math.random() * 28).toString().padStart(2, '0');
      const birthDate = yearPrefix + yearSuffix + month + day;

      // 第15-17位: 顺序码，第17位奇数为男，偶数为女
      const sequence = Math.floor(100 + Math.random() * 900).toString();
      const genderDigit = Math.random() > 0.5 ? Math.floor(Math.random() * 5) * 2 + 1 : Math.floor(Math.random() * 5) * 2;
      const sequenceWithGender = sequence.substring(0, 2) + genderDigit;

      // 第18位: 校验码（简单生成）
      const checkCode = Math.floor(Math.random() * 10).toString();

      const id = prefix + birthDate + sequenceWithGender + checkCode;

      return { name: generateChineseName(), id: id };
    }

    // 生成港澳通行证
    function generateHK通行证() {
      // 首字母为H或M
      const prefix = Math.random() > 0.5 ? 'H' : 'M';

      // 生成8位数字
      let randomPart;
      do {
        randomPart = Math.floor(10000000 + Math.random() * 90000000).toString();
      } while (isAllSameCharacters(prefix + randomPart));

      return { name: generateChineseName(), id: prefix + randomPart };
    }

    // 生成台湾通行证
    function generateTW通行证() {
      // 8位数字
      let randomPart;
      do {
        randomPart = Math.floor(10000000 + Math.random() * 90000000).toString();
      } while (isAllSameCharacters(randomPart));

      return { name: generateChineseName(), id: randomPart };
    }

    // 检查是否所有字符相同
    function isAllSameCharacters(str) {
      if (str.length <= 1) return false;
      const firstChar = str[0];
      for (let i = 1; i < str.length; i++) {
        if (str[i] !== firstChar) return false;
      }
      return true;
    }

    // 生成外国人居留证
    function generateForeignResidencePermit() {
      // 外国人永久居留身份证格式: 18位，前3位为国家或地区代码，后15位为顺序码
      const countryCode = Math.floor(100 + Math.random() * 900).toString();
      const randomPart = Math.floor(100000000000000 + Math.random() * 900000000000000).toString();

      // 随机英文姓名
      const firstName = generateRandomString(5, true, false, false, false);
      const lastName = generateRandomString(7, true, false, false, false);
      const name = firstName + ' ' + lastName;

      return { name: name, id: countryCode + randomPart };
    }

    // 生成随机手机号
    function generatePhoneNumber(includeCarrier) {
      // 手机号前三位（运营商号段）
      const carriers = [
        { prefixes: ['130', '131', '132', '155', '156', '185', '186', '145', '176'], name: '中国联通' },
        { prefixes: ['134', '135', '136', '137', '138', '139', '150', '151', '152', '157', '158', '159', '182', '183', '184', '147', '178'], name: '中国移动' },
        { prefixes: ['133', '153', '180', '181', '189', '177'], name: '中国电信' }
      ];

      // 随机选择运营商
      const carrier = carriers[Math.floor(Math.random() * carriers.length)];
      // 随机选择号段
      const prefix = carrier.prefixes[Math.floor(Math.random() * carrier.prefixes.length)];
      // 生成后8位
      const suffix = Math.floor(10000000 + Math.random() * 90000000).toString();

      const number = prefix + suffix;

      if (includeCarrier) {
        return { number: number, carrier: carrier.name };
      } else {
        return { number: number };
      }
    }

    // 生成随机字符串（用于生成随机英文姓名）
    function generateRandomString(length, useUppercase, useLowercase, useNumbers, useSymbols) {
      let charset = '';
      if (useUppercase) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      if (useLowercase) charset += 'abcdefghijklmnopqrstuvwxyz';
      if (useNumbers) charset += '0123456789';
      if (useSymbols) charset += '!@#$%^&*()_+~`|}{[]:;?><,./-=';

      let str = '';
      for (let i = 0; i < length; i++) {
        const randomIndex = Math.floor(Math.random() * charset.length);
        str += charset[randomIndex];
      }

      return str;
    }
  </script>
</body>
</html>
